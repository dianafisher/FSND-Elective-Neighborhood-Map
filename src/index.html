<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Neighborhood Map App</title>

    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>

</head>
<body>
   <!--  <h1>It works! HAHAHAHAHA</h1>
  <div>
    <ul id="cat-list" data-bind="foreach: cats">
        <li data-bind="text: name, click: $parent.catClicked"></li>
    </ul>
    <div id="cat" data-bind="with: currentCat">

        <h2 data-bind="text: name" id="cat-name"></h2>
        <h3 data-bind="text: title"></h3>
        <div data-bind="text: clickCount" id="cat-count"></div>

        <img data-bind="click: $parent.incrementCounter, attr: {src: imgSrc}" id="cat-img" src="" alt="cute cat">

        <ul data-bind="foreach: nicknames">
            <li>
                <span data-bind="text: $index"></span>:
                <span data-bind="text: $data"></span>
            </li>
        </ul>
    </div> -->
    <div id="map"></div>
    <script>

    var marker;

    function initMap() {
      // Construct the catalog query string
      url = 'http://data.ct.gov/resource/9k2y-kqxn.json?organization_type=Public%20School%20Districts&$$app_token=CGxaHQoQlgQSev4zyUh5aR5J3';

      // Intialize our map
      var center = new google.maps.LatLng(41.7656874,-72.680087);
      var mapOptions = {
        zoom: 8,
        center: center
      }

      var map = new google.maps.Map(document.getElementById("map"), mapOptions);

      function requestListener() {
        if (this.readyState === 4 && this.status === 200) {
          console.log("success!");
          console.log(this);
          // console.log(this.response);
          var data = JSON.parse(this.response);
          data.forEach(entry => {
              // console.log(entry);

            var infowindow = new google.maps.InfoWindow({
              content: entry.location_1.human_address
            });

              marker = new google.maps.Marker({
              position: new google.maps.LatLng(entry.location_1.latitude, entry.location_1.longitude),
                   map: map,
                  title: 'Hello, World!',
                  animation: google.maps.Animation.DROP,
              });
              marker.addListener('click', toggleBounce);

              // console.log(entry.location_1.human_address);

          });
        } else {
          console.log("oops, something went wrong");
        }
      }

      function toggleBounce() {
        if (marker.getAnimation() !== null) {
          marker.setAnimation(null);
        } else {
          marker.setAnimation(google.maps.Animation.BOUNCE);
        }
      }

      var oReq = new XMLHttpRequest();
      oReq.addEventListener("load", requestListener);
      oReq.open("GET", url);
      oReq.send();
  }



      // var map;
      // function initMap() {
      //   map = new google.maps.Map(document.getElementById('map'), {
      //     center: {lat: -34.397, lng: 150.644},
      //     zoom: 8,
      //     styles: [{"featureType":"water","stylers":[{"color":"#19a0d8"}]},{"featureType":"administrative","elementType":"labels.text.stroke","stylers":[{"color":"#ffffff"},{"weight":6}]},{"featureType":"administrative","elementType":"labels.text.fill","stylers":[{"color":"#e85113"}]},{"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"color":"#efe9e4"},{"lightness":-40}]},{"featureType":"road.arterial","elementType":"geometry.stroke","stylers":[{"color":"#efe9e4"},{"lightness":-20}]},{"featureType":"road","elementType":"labels.text.stroke","stylers":[{"lightness":100}]},{"featureType":"road","elementType":"labels.text.fill","stylers":[{"lightness":-100}]},{"featureType":"road.highway","elementType":"labels.icon"},{"featureType":"landscape","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"landscape","stylers":[{"lightness":20},{"color":"#efe9e4"}]},{"featureType":"landscape.man_made","stylers":[{"visibility":"off"}]},{"featureType":"water","elementType":"labels.text.stroke","stylers":[{"lightness":100}]},{"featureType":"water","elementType":"labels.text.fill","stylers":[{"lightness":-100}]},{"featureType":"poi","elementType":"labels.text.fill","stylers":[{"hue":"#11ff00"}]},{"featureType":"poi","elementType":"labels.text.stroke","stylers":[{"lightness":100}]},{"featureType":"poi","elementType":"labels.icon","stylers":[{"hue":"#4cff00"},{"saturation":58}]},{"featureType":"poi","elementType":"geometry","stylers":[{"visibility":"on"},{"color":"#f0e4d3"}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#efe9e4"},{"lightness":-25}]},{"featureType":"road.arterial","elementType":"geometry.fill","stylers":[{"color":"#efe9e4"},{"lightness":-10}]},{"featureType":"poi","elementType":"labels","stylers":[{"visibility":"simplified"}]}]
      //   });
      // }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAItQG0QFL6pl_kg3N4jfxUDAJ9Ub13XtE&callback=initMap"
    async defer></script>
  </div>
  <script src="js/knockout.js"></script>
  <script src="js/app.js"></script>
</body>
</html>